<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="eu.modelwriter.traceability.validation.core.crocopat.execute"
            name="Run with Crocopat">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="eu.modelwriter.traceability.validation.core.crocopat.handlers.CrocopatExecuteHandler"
            commandId="eu.modelwriter.traceability.validation.core.crocopat.execute">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.ui.popup.any">
         <menu
               id="eu.modelwriter.traceability.validation.core.crocopat.menu"
               label="Crocopat">
            <command
                  commandId="eu.modelwriter.traceability.validation.core.crocopat.execute"
                  label="Run with Crocopat"
                  style="push">
               <visibleWhen>
                  <reference
                        definitionId="when.on.ProjectExplorer.and.selection.is.file">
                  </reference>
               </visibleWhen>
            </command>
         </menu>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="when.on.project.explorer">
         <with
               variable="activePartId">
            <equals
                  value="org.eclipse.ui.navigator.ProjectExplorer">
            </equals>
         </with>
      </definition>
      <definition
            id="when.on.package.explorer">
         <with
               variable="activePartId">
            <equals
                  value="org.eclipse.jdt.ui.PackageExplorer">
            </equals>
         </with>
      </definition>
      <definition
            id="when.on.ProjectExplorer.and.selection.is.file">
         <and>
         	<or>
	            <reference
	                  definitionId="when.on.project.explorer">
	            </reference>
	            <reference
                   definitionId="when.on.package.explorer">
	            </reference>
         	</or>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false"
                     operator="or">
                  <adapt
                        type="org.eclipse.core.resources.IFile">
                  </adapt>
               </iterate>
            </with>
         </and>
      </definition>
   </extension>

	<extension
        point="org.eclipse.ui.editors">
     <editor
           class="eu.modelwriter.traceability.validation.core.crocopat.editor.RelationModelEditor"
           default="true"
           extensions="rml"
           id="crocopat.relationmodeleditor"
           name="RelationModelEditor">
     </editor>
  </extension>
</plugin>
