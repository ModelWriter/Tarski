<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<!--
    Copyright (c) 2015 UNIT Information Technologies R&D Ltd
    All rights reserved. This program and the accompanying materials
    are made available under the terms of the Eclipse Public License v1.0
    which accompanies this distribution, and is available at
    http://www.eclipse.org/legal/epl-v10.html
   
    Contributors:
        Ferhat Erata - initial API and implementation
        H. Emre Kirmizi - initial API and implementation
        Serhat Celik - initial API and implementation
        U. Anil Ozturk - initial API and implementation
 -->

<plugin>

<extension point="org.eclipse.core.expressions.definitions">
<!-- to mark all and delete all -->
	<definition
	      id="when.ecoreEditor.is.notActive.or.not.on.contextualView">
	      <and>
	      <reference
             definitionId="activeEditor.is.not.instanceOf.EcoreEditor">
	      </reference>
		  <reference
			    definitionId="activePart.is.not.contextualView">
	      </reference>
	      <reference
             definitionId="activePart.instanceOf.IEditorPart">
	      </reference>
	        <reference
               definitionId="when.not.on.ProjectExplorer.or.PackageExplorer">
	        </reference>
	      </and>
	</definition>

<!-- to create reqif from markdown command -->
	<definition
	      id="when.markdownEditor.isActive">
	      <and>
	        <with
	              variable="activeEditorId">
	              <equals
	                    value="org.eclipse.mylyn.wikitext.ui.editor.markupEditor">
	              </equals>
	        </with>
	        <reference
               definitionId="activePart.instanceOf.IEditorPart">
	        </reference>
	        <reference
               definitionId="when.not.on.ProjectExplorer.or.PackageExplorer">
	        </reference>
	      </and>
	</definition>
	
	<definition
       id="active.part.is.editorpart.and.active.editor.is.specificationeditor">
       <and>
       		<with
	              variable="activePart">
	              <instanceof
	                    value="org.eclipse.ui.IEditorPart">
	              </instanceof>
        	</with>
       		<with
	             variable="activeEditorId">
	             <equals
	                   value="eu.modelwriter.specification.editor.Meta">
	             </equals>
       		</with>
       </and>
	</definition>
	
	<definition
       id="when.on.specificationEditor.or.when.specfile.is.selected">
       <or>
       	 <with
             variable="activeEditorId">
             <equals
                   value="eu.modelwriter.specification.editor.Meta">
             </equals>
        </with>
        <reference
              definitionId="when.on.ProjectExplorer.or.PackageExplorer.and.selection.is.specification.file">
        </reference>
       </or>
	</definition>

<!-- to count markers in File/Resource -->
	<definition
	      id="when.on.project.explorer">
	      <with
	            variable="activePartId">
	            <equals
	                  value="org.eclipse.ui.navigator.ProjectExplorer">
	            </equals>
	      </with>
	</definition>
	
	<definition
       id="when.on.package.explorer">
	      <with
	            variable="activePartId">
	            <equals
	                  value="org.eclipse.jdt.ui.PackageExplorer">
	            </equals>
	      </with>
	</definition>
	
	<definition
       id="when.on.ProjectExplorer.or.PackageExplorer">
     	<or>
             <reference
                   definitionId="when.on.project.explorer">
             </reference>
             <reference
                   definitionId="when.on.package.explorer">
             </reference>
     	</or>
	</definition>
	
	<definition
       id="when.not.on.ProjectExplorer.or.PackageExplorer">
        <not>
			<reference
   				definitionId="when.on.ProjectExplorer.or.PackageExplorer">
			</reference>
        </not>
	</definition>
	
	<definition
       id="selection.is.file">
       <with
         variable="selection">
         	<iterate ifEmpty="false" operator="and">
         		<adapt
                 type="org.eclipse.core.resources.IFile">
         		</adapt>
         	</iterate>
       </with>
	</definition>
	
	<definition
       id="when.on.ProjectExplorer.or.PackageExplorer.and.selection.is.file">
       <and>
	       <reference
	             definitionId="when.on.ProjectExplorer.or.PackageExplorer">
	       </reference>
	       <reference
              definitionId="selection.is.file">
	       </reference>
       </and>
	</definition>
	
	<definition
       id="when.on.ProjectExplorer.or.PackageExplorer.and.selection.is.specification.file">
       <and>
	       <reference
	             definitionId="when.on.ProjectExplorer.or.PackageExplorer.and.selection.is.file">
	       </reference>
	       <reference
              definitionId="is.specification.file">
	       </reference>
       </and>
	</definition>
	
	<definition
       id="is.specification.file">
       <with
             variable="selection">
             <iterate ifEmpty="false" operator="or">
             	<adapt
                    type="org.eclipse.core.resources.IFile">
                    <or>
	                    <test
	                          property="org.eclipse.core.resources.extension" value="mw">
	                    </test>
	                    <test
	                          property="org.eclipse.core.resources.extension" value="als">
	                    </test>
                    </or>
             	</adapt>
             </iterate>
       </with>
	</definition>
	
	<definition
       id="activeEditor.is.instanceOf.EcoreEditor">
       <with
             variable="activeEditor">
             <instanceof
                   value="org.eclipse.emf.ecore.presentation.EcoreEditor">
             </instanceof>
       </with>
	</definition>
	
	<definition
       id="activeEditor.is.not.instanceOf.EcoreEditor">
       <not>
	       	<reference
	              definitionId="activeEditor.is.instanceOf.EcoreEditor">
	       	</reference>
       </not>
	</definition>
	
	<definition
       id="activePart.instanceOf.IEditorPart">
        <with
              variable="activePart">
              <instanceof
                    value="org.eclipse.ui.IEditorPart">
              </instanceof>
        </with>
	</definition>
	
	<definition
		id="activePart.is.contextualView">
		<with
			variable="activePartId">
			<equals
	         	value="eu.modelwriter.marker.ui.views.contextualview">
			</equals>
		</with>
	</definition>
	
	<definition
       id="activePart.is.not.contextualView">
       <not>
       		<reference
               definitionId="activePart.is.contextualView">
       		</reference>
       </not>
	</definition>
	
	<definition
       id="when.selection.is.marker">
	   <with variable="selection">
	         <iterate ifEmpty="false" operator="and">
	             <adapt 
	             	type="org.eclipse.core.resources.IMarker">
	             </adapt>
	         </iterate>
	    </with>
	</definition>
	
	<definition
       id="when.selection.is.marker.and.activePart.is.contextualView">
       <and>
       	<reference
              definitionId="activePart.is.contextualView">
       	</reference>
       	<reference
              definitionId="when.selection.is.marker">
       	</reference>
       </and>
	</definition>
	
	<definition
       id="when.activePart.is.contextualView.or.IEditorPart">
       <or>
       <reference
             definitionId="activePart.instanceOf.IEditorPart">
       </reference>
       <reference
             definitionId="when.selection.is.marker.and.activePart.is.contextualView">
       </reference>
       </or>
	</definition>
 </extension>

  <!-- binding keys for ModelWriter actions -->
 <extension
       point="org.eclipse.ui.bindings">
    <key
          commandId="eu.modelwriter.marker.command.mark"
          contextId="org.eclipse.ui.contexts.window"
          schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
          sequence="M1+8">
    </key>
    <key
          commandId="eu.modelwriter.marker.command.markall"
          contextId="org.eclipse.ui.contexts.window"
          schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
          sequence="M1+9">
    </key>
    <key
          commandId="eu.modelwriter.marker.command.map"
          contextId="org.eclipse.ui.contexts.window"
          schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
          sequence="M1+0">
    </key>
    <key
          commandId="eu.modelwriter.marker.command.delete"
          contextId="org.eclipse.ui.contexts.window"
          schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
          sequence="M1+4">
    </key>
    <key
          commandId="eu.modelwriter.marker.command.deleteall"
          contextId="org.eclipse.ui.contexts.window"
          schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
          sequence="M1+5">
    </key>
<!--<key
          commandId="eu.modelwriter.marker.command.countforfile"
          contextId="org.eclipse.ui.contexts.window"
          schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
          sequence="M1+6">
    </key>-->
 </extension>
  
<!-- test menu for key bindings -->
 <extension
       point="org.eclipse.ui.menus">
    <menuContribution
          allPopups="false"
          locationURI="popup:org.eclipse.ui.popup.any">
          <menu
               icon="platform:/plugin/eu.modelwriter.marker/icons/Menu.gif"
               id="eu.modelwriter.marker.command.popupmenu"
               label="Tarski"
               sibling_order="&lt;command&#x0D;&#x0A;">
             <command
                   commandId="eu.modelwriter.marker.command.mark"
                   label="Create a Trace Element"
                   icon="platform:/plugin/eu.modelwriter.marker/icons/Black.gif"
                   style="push"
                   tooltip="Trace selected element">
                   <visibleWhen>
                   <reference
                         definitionId="activePart.instanceOf.IEditorPart">
                   </reference>
                   </visibleWhen>
             </command>
             <command
                   commandId="eu.modelwriter.marker.command.markwithtype"
                   icon="platform:/plugin/eu.modelwriter.marker/icons/hierarchy.png"
                   label="Create a Trace Element with Type"
                   style="push"
                   tooltip="Create a trace element with a type ">
                   <visibleWhen>
                   <reference
                         definitionId="activePart.instanceOf.IEditorPart">
                   </reference>
                   </visibleWhen>
             </command>
             <command
                   commandId="eu.modelwriter.marker.command.map"
                   icon="platform:/plugin/eu.modelwriter.marker/icons/Red.gif"
                   label="Create a Trace Link"
                   style="push"
                   tooltip="Link trace element with other trace elements">
                   <visibleWhen>
                         <reference
                               definitionId="when.activePart.is.contextualView.or.IEditorPart">
                         </reference>
                   </visibleWhen>
             </command>
             <command
                   commandId="eu.modelwriter.marker.command.delete"
                   icon="platform:/plugin/eu.modelwriter.marker/icons/Delete.gif"
                   label="Delete Trace"
                   style="push"
                   tooltip="Deletes selected item">
                   <visibleWhen>
                         <reference
                               definitionId="when.activePart.is.contextualView.or.IEditorPart">
                         </reference>
                   </visibleWhen>
             </command>
             <command
                   commandId="eu.modelwriter.marker.command.deleteall"
                   icon="platform:/plugin/eu.modelwriter.marker/icons/Delete.gif"
                   label="Delete All Trace Elements"
                   style="push"
                   tooltip="Deletes selected item for all same text">
			    <visibleWhen>
			     <reference definitionId="when.ecoreEditor.is.notActive.or.not.on.contextualView"/>
			    </visibleWhen>
             </command>
             <command
                   commandId="eu.modelwriter.marker.command.markall"
                   icon="platform:/plugin/eu.modelwriter.marker/icons/Black.gif"
                   label="Trace All"
                   style="push"
                   tooltip="Trace selected item for all same text">
			    <visibleWhen>
			     <reference definitionId="when.ecoreEditor.is.notActive.or.not.on.contextualView"/>
			    </visibleWhen>
             </command>
              <command
                   commandId="eu.modelwriter.marker.command.addremovetype"
                   label="Add/Remove Type"
                   style="push"
                   tooltip="Adding type to/Removing type from selected marker">
                   <visibleWhen>
                         <reference
                               definitionId="when.activePart.is.contextualView.or.IEditorPart">
                         </reference>
                   </visibleWhen>
             </command>
            <!-- <command
                   commandId="eu.modelwriter.marker.command.countforresource"
                   label="Count Traces in Resource"
                   tooltip="Counts all markers in the resource">
                   <visibleWhen>
                   <reference
                         definitionId="when.on.ProjectExplorer.or.PackageExplorer">
                   </reference>
                   </visibleWhen>
             </command> 
             <command
                   commandId="eu.modelwriter.marker.command.countforfile"
                   label="Count Traces in File"
                   tooltip="Counts all markers in the file">
                   <visibleWhen>
                   <reference
                         definitionId="when.on.ProjectExplorer.or.PackageExplorer.and.selection.is.file">
                   </reference>
                   </visibleWhen>
             </command> -->
             <command
                   commandId="eu.modelwriter.marker.command.markallinworkspace"
                   label="Trace All in Workspace"
                   style="push">
			    <visibleWhen>
			     <reference 
			     	definitionId="when.ecoreEditor.is.notActive.or.not.on.contextualView"/>
			    </visibleWhen>
             </command>
             <command
                   commandId="eu.modelwriter.marker.command.parsealloyfromprojectexplorer"
                   icon="platform:/plugin/eu.modelwriter.marker/icons/alloylogo.gif"
                   label="Load Specification"
                   style="push">
                <visibleWhen>
                   <reference
                         definitionId="when.on.ProjectExplorer.or.PackageExplorer.and.selection.is.specification.file">
                   </reference>
                </visibleWhen>
             </command>
             <command
                   commandId="eu.modelwriter.marker.command.updatespec"
                   icon="platform:/plugin/eu.modelwriter.marker/icons/updateSpec.png"
                   label="Update Specification"
                   style="push">
                <visibleWhen>
                   <reference
                         definitionId="when.on.specificationEditor.or.when.specfile.is.selected">
                   </reference>
                </visibleWhen>
             </command>
             <command
                   commandId="eu.modelwriter.marker.command.automatedTraceCreation"
                   label="Automated Trace Generation"
                   style="push">
                <visibleWhen>
                   <reference
                         definitionId="when.on.ProjectExplorer.or.PackageExplorer.and.selection.is.file">
                   </reference>
                </visibleWhen>
             </command>
          </menu>
    </menuContribution>
    <menuContribution
          allPopups="false"
          locationURI="menu:org.eclipse.ui.main.menu">
       <menu
             id="eu.modelwriter.marker.main.menu"
             label="Tarski">
          <command
                commandId="eu.modelwriter.marker.command.parsealloyfromfilesystem"
                icon="platform:/plugin/eu.modelwriter.marker/icons/alloylogo.gif"
                label="Load Specification"
                style="push">
          </command>
          <command
                commandId="org.eclipse.ui.window.preferences"
                icon="platform:/plugin/eu.modelwriter.marker/icons/hierarchy.png"
                label="Type Hierarchy"
                style="push">
             <parameter
                   name="preferencePageId"
                   value="eu.modelwriter.marker.ui.internal.preferences.markertype">
             </parameter>
          </command>
          <command
                commandId="eu.modelwriter.marker.command.markervisibility"
                label="Switch Trace Visibility"
                style="push"
                tooltip="Switch trace annotations between visible/invisible">
          </command>
          <command
                commandId="eu.modelwriter.marker.command.deleteAllTraceElementsInWorkspace"
                label="Delete All Trace Elements"
                style="push"
                tooltip="Deletes all ">
          </command>
       </menu>
    </menuContribution>

    <menuContribution
		locationURI="toolbar:eu.modelwriter.marker.ui.views.targetview">
		<command 
			commandId="eu.modelwriter.marker.command.targetviewrefresh"
			icon="platform:/plugin/eu.modelwriter.marker/icons/refresh.gif"
			style="push">
		</command>
	</menuContribution>
	
	<menuContribution
		locationURI="toolbar:eu.modelwriter.marker.ui.views.sourceview">
		<command 
			commandId="eu.modelwriter.marker.command.sourceviewrefresh"
			icon="platform:/plugin/eu.modelwriter.marker/icons/refresh.gif"
			style="push">
		</command>
	</menuContribution>
	
	<menuContribution
		locationURI="toolbar:eu.modelwriter.marker.ui.views.contextualview">
		<command 
			commandId="eu.modelwriter.marker.command.contextualviewrefresh"
			icon="platform:/plugin/eu.modelwriter.marker/icons/refresh.gif"
			style="push">
		</command>
	</menuContribution>
	
	<menuContribution
		locationURI="toolbar:eu.modelwriter.marker.ui.views.masterview">
		<command 
			commandId="eu.modelwriter.marker.command.masterviewdelete"
			icon="platform:/plugin/eu.modelwriter.marker/icons/trash.png"
			style="push">
		</command>
	</menuContribution>
		<menuContribution
       locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
       <toolbar
             id="eu.modelwriter.marker.command.toolbar.updatespec">
             <command
		          commandId="eu.modelwriter.marker.command.updatespec"
		          label="Update Specification"
		          icon="platform:/plugin/eu.modelwriter.marker/icons/updateSpec.png"
		          style="push">
		          <visibleWhen>
		          	<reference
                   		definitionId="active.part.is.editorpart.and.active.editor.is.specificationeditor">
		          	</reference>
		          </visibleWhen>
	    	</command>
       </toolbar>
	</menuContribution>
	
 <menuContribution
       locationURI="toolbar:eu.modelwriter.marker.ui.views.visualizationview">
    <command
          commandId="referenceToMenuId"
          icon="platform:/plugin/eu.modelwriter.marker/icons/start.png"
          label="Start"
          style="pulldown">
          <visibleWhen>
          	<with
                 variable="eu.modelwriter.marker.command.analysissourceprovider.activity">
                 <or>
                 	<equals
                        value="ANALYSIS">
                 	</equals>
                 	<equals
                        value="STOP">
                 	</equals>
                 </or>
          	</with>
          </visibleWhen>
    </command>
    <command
          commandId="eu.modelwriter.marker.command.nextsolution"
          icon="platform:/plugin/eu.modelwriter.marker/icons/next.png"
          style="push">
    </command>
    <command
          commandId="eu.modelwriter.marker.command.stop"
          icon="platform:/plugin/eu.modelwriter.marker/icons/stop.png"
          style="push">
    </command>
 </menuContribution>
 <menuContribution
       allPopups="false"
       locationURI="menu:referenceToMenuId">  
    <command
          commandId="eu.modelwriter.marker.command.reasoning"
          icon="platform:/plugin/eu.modelwriter.marker/icons/start.png"
          style="pulldown">
    </command>
    <command
          commandId="eu.modelwriter.marker.command.discovery"
          icon="platform:/plugin/eu.modelwriter.marker/icons/start.png"
          style="pulldown">
    </command>
 </menuContribution>

 </extension>
 
 <!--  handlers for key bindings --> 
 <extension
       point="org.eclipse.ui.handlers">
    <handler
          class="eu.modelwriter.marker.command.MarkHandler"
          commandId="eu.modelwriter.marker.command.mark">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.AddRemoveTypeHandler"
          commandId="eu.modelwriter.marker.command.addremovetype">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.MarkWithTypeHandler"
          commandId="eu.modelwriter.marker.command.markwithtype">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.MarkAllHandler"
          commandId="eu.modelwriter.marker.command.markall">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.MappingHandler"
          commandId="eu.modelwriter.marker.command.map">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.DeleteHandler"
          commandId="eu.modelwriter.marker.command.delete">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.DeleteAllHandler"
          commandId="eu.modelwriter.marker.command.deleteall">
    </handler>
    <handler
	      class="eu.modelwriter.marker.command.CountMarkersInFileHandler"
          commandId="eu.modelwriter.marker.command.countforfile">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.CountMarkersInResourceHandler"
          commandId="eu.modelwriter.marker.command.countforresource">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.MarkAllInWorkspaceHandler"
          commandId="eu.modelwriter.marker.command.markallinworkspace">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.AlloyParseFromProjectExplorerHandler"
          commandId="eu.modelwriter.marker.command.parsealloyfromprojectexplorer">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.UpdateSpecHandler"
          commandId="eu.modelwriter.marker.command.updatespec">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.AlloyParseFromFileSystemHandler"
          commandId="eu.modelwriter.marker.command.parsealloyfromfilesystem">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.MarkerVisibilityHandler"
          commandId="eu.modelwriter.marker.command.markervisibility">
    </handler>
    <handler
    	  class="eu.modelwriter.marker.command.TargetViewRefreshHandler"
    	  commandId="eu.modelwriter.marker.command.targetviewrefresh">
    </handler>
	<handler
    	  class="eu.modelwriter.marker.command.SourceViewRefreshHandler"
    	  commandId="eu.modelwriter.marker.command.sourceviewrefresh">
    </handler>
    <handler
    	  class="eu.modelwriter.marker.command.ContextualViewRefreshHandler"
    	  commandId="eu.modelwriter.marker.command.contextualviewrefresh">
    </handler>
    <handler
    	  class="eu.modelwriter.marker.command.MasterViewDeleteHandler"
    	  commandId="eu.modelwriter.marker.command.masterviewdelete">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.visualization.UpdateChangeAndImpactHandler"
          commandId="eu.modelwriter.marker.command.updatechangeandimpact">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.AutomatedTraceCreationHandler"
          commandId="eu.modelwriter.marker.command.automatedTraceCreation">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.DeleteAllTraceElementsHandler"
          commandId="eu.modelwriter.marker.command.deleteAllTraceElementsInWorkspace">
    </handler>
    <handler
          class="eu.modelwriter.marker.command.visualization.VizReasoningHandler"
          commandId="eu.modelwriter.marker.command.reasoning">
          <enabledWhen>
          	<with
                 variable="eu.modelwriter.marker.command.analysissourceprovider.activity">
                 <or>
                 	<equals
                        value="ANALYSIS">
                 	</equals>
                 	<equals
                        value="STOP">
                 	</equals>
                 </or>
          	</with>
          </enabledWhen>
          <!--<activeWhen>
          	<with
                 variable="eu.modelwriter.marker.command.analysissourceprovider.activity">
                 <or>
                 	<equals
                        value="ANALYSIS">
                 	</equals>
                 	<equals
                        value="STOP">
                 	</equals>
                 </or>
          	</with>
          </activeWhen>-->
    </handler>
    <handler
          class="eu.modelwriter.marker.command.visualization.VizNextSolutionHandler"
          commandId="eu.modelwriter.marker.command.nextsolution">
          <enabledWhen>
          	<with
                 variable="eu.modelwriter.marker.command.analysissourceprovider.activity">
                 <or>
                 	<equals
                        value="ANALYSIS">
                 	</equals>
                 	<equals
                        value="NEXT">
                 	</equals>
                 </or>
          	</with>
          </enabledWhen>
          <!--<activeWhen>
          	<with
                 variable="eu.modelwriter.marker.command.analysissourceprovider.activity">
                 <or>
                 	<equals
                        value="ANALYSIS">
                 	</equals>
                 	<equals
                        value="NEXT">
                 	</equals>
                 </or>
          	</with>
          </activeWhen>-->
    </handler>
    <handler
          class="eu.modelwriter.marker.command.visualization.VizStopNextHandler"
          commandId="eu.modelwriter.marker.command.stop">
          <enabledWhen>
          	<with
                 variable="eu.modelwriter.marker.command.analysissourceprovider.activity">
                 	<equals
                        value="NEXT">
                 	</equals>
          	</with>
          </enabledWhen>
          <!--<activeWhen>
          	<with
                 variable="eu.modelwriter.marker.command.analysissourceprovider.activity">
                 	<equals
                        value="NEXT">
                 	</equals>
          	</with>
          </activeWhen>-->
    </handler>
    <handler
          class="eu.modelwriter.marker.command.visualization.VizDiscoverytAtomHandler"
          commandId="eu.modelwriter.marker.command.discovery">
          <enabledWhen>
          	<with
                 variable="eu.modelwriter.marker.command.analysissourceprovider.activity">
                 <or>
                 	<equals
                        value="ANALYSIS">
                 	</equals>
                 	<equals
                        value="STOP">
                 	</equals>
                 </or>
          	</with>
          </enabledWhen>
          <!--<activeWhen>
          	<with
                 variable="eu.modelwriter.marker.command.analysissourceprovider.activity">
                 <or>
                 	<equals
                        value="ANALYSIS">
                 	</equals>
                 	<equals
                        value="STOP">
                 	</equals>
                 </or>
          	</with>
          </activeWhen>-->
    </handler>
 </extension>
 
 <!-- commands for binding keys -->
 <extension
       point="org.eclipse.ui.commands">
    <command
          id="eu.modelwriter.marker.command.mark"
          name="Mark">
    </command>
    <command
          id="eu.modelwriter.marker.command.addremovetype"
          name="Add/Remove Type">
    </command>
    <command
          id="eu.modelwriter.marker.command.markwithtype"
          name="Mark with Type">
    </command>
    <command
          id="eu.modelwriter.marker.command.markall"
          name="Mark All">
    </command>
    <command
          id="eu.modelwriter.marker.command.map"
          name="Map Marker">
    </command>
    <command
          id="eu.modelwriter.marker.command.delete"
          name="Delete Marker">
    </command>
    <command
          id="eu.modelwriter.marker.command.deleteall"
          name="Delete All Markers">
    </command>
    <command
          id="eu.modelwriter.marker.command.countforfile"
          name="Count Markers in File">
    </command>
    <command
          description="Counts all markers in the resource"
          id="eu.modelwriter.marker.command.countforresource"
          name="Count Markers in Resource">
    </command>
    <command
          id="eu.modelwriter.marker.command.markallinworkspace"
          name="Mark All in Workspace">
    </command>
    <command
          description="Parses &apos;*.als&apos; files"
          id="eu.modelwriter.marker.command.parsealloyfromprojectexplorer"
          name="Load Specification">
    </command>
    <command
          description="Update &apos;*.als&apos; files"
          id="eu.modelwriter.marker.command.updatespec"
          name="Update Specification">
    </command>
    <command
          description="Parses &apos;*.als&apos; files"
          id="eu.modelwriter.marker.command.parsealloyfromfilesystem"
          name="Load Specification">
    </command>
    <command
          id="eu.modelwriter.marker.command.markervisibility"
          name="Set Marker Visibility">
    </command>
    <command
    	  id="eu.modelwriter.marker.command.targetviewrefresh"
    	  name="Target View Refresh">
    </command>
	<command
    	  id="eu.modelwriter.marker.command.sourceviewrefresh"
    	  name="Source View Refresh">
    </command>
    <command
    	  id="eu.modelwriter.marker.command.contextualviewrefresh"
    	  name="Contextual View Refresh">
    </command>
    <command
    	  id="eu.modelwriter.marker.command.masterviewdelete"
    	  name="Master View Delete">
    </command>
    <command
          id="eu.modelwriter.marker.command.updatechangeandimpact"
          name="Update Change And Impact">
    </command>
    <command
          id="eu.modelwriter.marker.command.resolve"
          name="Resolve">
    </command>
    <command
          id="eu.modelwriter.marker.command.automatedTraceCreation"
          name="Automated Trace Generation">
    </command>
    <command
          id="eu.modelwriter.marker.command.deleteAllTraceElementsInWorkspace"
          name="Delete All Trace Elements">
    </command>
    <command
          id="eu.modelwriter.marker.command.reasoning"
          name="Reasoning">
    </command>
    <command
          id="eu.modelwriter.marker.command.nextsolution"
          name="Next Solution">
    </command>
    <command
          id="eu.modelwriter.marker.command.stop"
          name="Stop Next Solution">
    </command>
    <command
          id="referenceToMenuId"
          name="referenceToMenuId">
    </command>
    <command
          id="eu.modelwriter.marker.command.discovery"
          name="Discover Atom">
    </command>
 </extension> 
 
 <extension
       point="org.eclipse.ui.services">
       <sourceProvider
             provider="eu.modelwriter.marker.command.visualization.AnalysisSourceProvider">
          <variable
                name="eu.modelwriter.marker.command.analysissourceprovider.activity" priorityLevel="workbench"/>
       </sourceProvider>
 </extension>
</plugin>
